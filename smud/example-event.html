<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>jMUD Event Example</title>
<link rel="stylesheet" type="text/css" href="media/css/layout.css" />
<link rel="stylesheet" type="text/css" href="media/css/mud-colors.css" />
<script src="media/js/jquery.js" type="text/javascript"></script>
<script src="media/js/xregexp-min.js" type="text/javascript"></script>
<script src="http://swfobject.googlecode.com/svn/trunk/swfobject/src/swfobject.js" type="text/javascript"></script>
<script src="media/js/jsocket.js" type="text/javascript"></script>
<script src="media/js/jquery.mud.js" type="text/javascript"></script>
<script type="text/javascript">

$(function(){
	// Create an options array to tell the MUD about our input box.
	var options = {
		'port' : 5446,
		'id_input'		: 'socket-input',
		'id_title'		: 'socket-title'
	};

	// Create our MUD using the given options.
	var jmud = $("#socket-output").mud(options);
	
	// Bind a couple of events
	jmud.bind('onSendCommand', function(e) {
		if (e.text[0] == '#') {
			alert('OMG! No starting with #!');
			
			e.preventDefault();
		}
	});
	
	jmud.bind('onVarChange', function(e) {
		$("#varcont").prepend('<dt>' + e.key + '</dt><dd>' + e.value + '</dd>');
	});
	
	
	// Finally, auto-focus the input box on page load.
	$("#socket-input").focus();
});

</script>
</head>
<body>

<div id="socket"></div>
<div id="content">
	
	<div id="heading">
		<h1>jMUD</h1>
		<span>HTML/CSS + JavaScript + Flash = MUD</span>
		<div class="clear"></div>
	</div>
	
	<p>Using events you can do all sorts of things. In particular, jMUD can
	recieve variables from the server using <a href="http://tintin.sourceforge.net/msdp/">MSDP</a> and
	report them using an event, letting you create custom GUI elements easilly with
	data from your MUD.</p>
	
	<hr />
	
	<div class="mud-pane" id="socket-output"></div>
	
	<input style="width:100%" class="mud-input" type="text" id="socket-input" />
	
	<div style="margin-top:25px">
		MSDP / NEW-ENVIRON Variables
		<dl id="varcont"></dl>
	</div>
	
</div>

</body>
</html>