<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>jMUD ZMP Example</title>
<link rel="stylesheet" type="text/css" href="media/css/layout.css" />
<link rel="stylesheet" type="text/css" href="media/css/mud-colors.css" />
<script src="media/js/jquery.js" type="text/javascript"></script>
<script src="media/js/xregexp-min.js" type="text/javascript"></script>
<script src="http://swfobject.googlecode.com/svn/trunk/swfobject/src/swfobject.js" type="text/javascript"></script>
<script src="media/js/jsocket.js" type="text/javascript"></script>
<script src="media/js/jquery.mud.js" type="text/javascript"></script>
<script src="media/js/jmud.command.js" type="text/javascript"></script>
<script src="media/js/jmud.zmp.js" type="text/javascript"></script>
<script type="text/javascript">

$(function(){
  // Create an options array to tell the MUD about our input box.
  // Note: giving the hostname isn't necessary. If it's missing, Flash
  // will connect to the server that served the files.
  var options = {
    'hostname'	: 'fourworlds.kicks-ass.net',
    'port'			: 5445,
    
    'id_input'	: 'socket-input'
  };

  // Create the MUD using our options.
  var this_jmud = $("#socket-output").mud(options);
	
	// Define a few custom ZMP commands.
	function jmud_plugins(jmud, args) {
		jmud.zmp.send('jmud.plugins.loaded', jmud.plugins);
	}
	
	function jmud_alert(jmud, args) {
		if (args.length == 0) return;
		alert('The server says:\r\n\r\n' + args.join('\r\n'));
	}
	
	// Once jMUD is ready, inform it of our ZMP commands.
	this_jmud.bind('onReady', function(e) {
		e.jmud.zmp.set('jmud.plugins.list', jmud_plugins);
		e.jmud.zmp.set('jmud.alert', jmud_alert);
	});
});

</script>
</head>
<body>

<div id="socket"></div>
<div id="content">
  
	<div id="heading">
		<h1>jMUD</h1>
		<span>HTML/CSS + JavaScript + Flash = MUD</span>
		<div class="clear"></div>
	</div>
	
	<p>As of v0.6 I've written a basic ZMP plugin. This demonstrates the plugin and how to add custom commands. For this demo, I've added two:</p>
	<ul>
		<li><b>jmud.plugins.list</b> - No arguments. jMUD will respond with <b>jmud.plugins.loaded</b> and an argument for each loaded plugin.</li>
		<li><b>jmud.alert</b> - Displays an alert message using the JavaScript alert() function. Each argument it recieves will be displayed on a new line.</li>
	</ul>
	<p>For testing, enter the command <b>zmp</b> followed by a space, then the name of the ZMP command you want the server to send, and then any arguments (space
	separated, though you can group by using quotes).</p>
	<p>Aside from the two commands listed above, only the ZMP core is included.</p>
	<hr />
	
  <div class="mud-pane" id="socket-output">Isn't this exciting? Text in the output pane can be used as a splash of sorts.</div>
  
  <input style="width:100%" class="mud-input" type="text" id="socket-input" />
  
</div>

</body>
</html>